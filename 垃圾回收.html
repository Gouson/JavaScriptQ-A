<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>垃圾回收机制</title>
</head>
<style>
    body {
        padding: 50px 100px;
    }

    * {
        margin: 10px 0;
        line-height: 160%;
    }

    pre {
        background-color: #f8f8f8;
    }
</style>

<body>
    <p>为什么需要垃圾回收：因为对象需要占用内存，而内存资源是有限的。</p>
    <p> js 会周期性的对不在使用的对象销毁，释放内存，关键点就在于怎么识别哪些对象是垃圾。
        垃圾对象：对象没有被引用，或者几个对象形成循环引用，但是根访问不到他们，这些都是可回收的垃圾。</p>
    <p> 垃圾回收的两种机制：标记清除和引用计数</p>
    <h3>标记清除法</h3>
    <p>垃圾收集器在运行的时候会给存储在内存中的所有变量都加上标记，然后，它会去掉环境中的变量以及被环境中的变量引用的标记，而在此之后再被加上标记的变量将被视为准备删除的变量，原因是环境中的变量已经无法访问到这些变量了。</p>
    <p>最后。垃圾收集器完成内存清除工作，销毁那些带标记的值，并回收他们所占用的内存空间。</p>
    <p>比如说函数中声明了一个变量，就做一个标记，当函数执行完成，退出执行栈，这个变量的标记就变成已使用完。</p>
    <p>目前主流浏览器采用的是这个策略</p>
    <h3>引用计数</h3>
    <p>跟踪每个值被引用的次数，声明一个变量后，这个变量每被其他变量引用一次，就加 1 ，如果变量引用释放了，就减 1，当引用次数为 0 的时候，对象就被清理。但这个有个循环引用的弊端，所以应用的比较少。</p>
    <h3>垃圾收集的性能优化</h3>
    <ol>
        <li>分代回收，对象分成两组，新生带、老生带</li>
        <li>增量回收</li>
        <li>空闲时间回收</li>
    </ol>
</body>

</html>